pipeline {
agent
    {
        node {
                label 'master'
                //customWorkspace "${env.JobPath}"
              }
    }
    stages 
    {
        stage('Start') {
            steps {
                echo 'Starting DevOps Pipeline'
            }
        }
        stage ('Code and Build') {
            steps {
                build job: 'Code and Build'
            }
        }
        stage ('Deploy') {
            steps {
                build job: 'Deploy'
            }
        }
        stage('End') {
            steps {
                echo 'Completing DevOps Pipeline'
            }
        }
    }
}
post {
        failure {    // notify users when the Pipeline fails
            mail(to: 'me@example.com', subject: "Failed Pipeline", body: "Something is wrong.")
        }
    }